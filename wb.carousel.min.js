/* jQuery Carousel Plugin for WYSIWYG Web Builder 17 - Copyright Pablo Software solutions 2022 - http://www.wysiwygwebbuilder.com */
(function(v){v.fn.carousel=function(g){var e={delay:3E3,duration:500,easing:"linear",scalemode:0,mode:"forward",pagination:!0,pagination_img_default:"",pagination_img_active:"",pause:"hover",start:0};var l=g&&"string"==typeof g?g:v.extend(e,g);return this.each(function(){v.carousel(this,l)})};v.carousel=function(g,e){function l(b,c){var a=b.data("carousel");if("forward-backward"==a.mode)0==a.currentFrame&&(c=0),a.currentFrame==a.count-1&&(c=1),a.direction=c;else if("forward-circular"==a.mode||"backward-circular"==
a.mode){if(0==a.currentFrame&&1==c){var h=a.currentFrame;a.currentFrame=a.count-1;a.pagination&&r(b,h,a.currentFrame);var m=b.find(".frame:last").children();3==a.scalemode&&(m=b.find(".frame:last").children().children());b.find(".frame:last").css({position:"relative",left:-1*a.width*(a.currentFrame+1)+"px"});m.css({marginLeft:-1*a.width*a.currentFrame+"px"});b.trigger("beforeActivate",a.currentFrame);b.stop().animate({left:"+="+a.width},a.duration,a.easing,function(){b.css("left","-"+(a.total_width-
a.width)+"px");b.find(".frame:last").css({position:"",left:""});m.css({marginLeft:"0px"});n(b,a.width*a.currentFrame,0,a.easing)});return!1}if(a.currentFrame==a.count-1&&0==c){h=a.currentFrame;a.currentFrame=0;a.pagination&&r(b,h,a.currentFrame);b.trigger("beforeActivate",a.currentFrame);b.find(".frame:first").css({position:"relative",left:a.total_width+"px"});b.stop().animate({left:"-="+a.width},a.duration,a.easing,function(){b.css("left","0px");b.find(".frame:first").css("left","0px");n(b,a.width*
a.currentFrame,0,a.easing)});return}}0==c?A(b):B(b);"forward-backward"==a.mode&&($("#"+b.attr("id")+"_next").css("display",a.currentFrame==a.count-1?"none":"block"),$("#"+b.attr("id")+"_back").css("display",0==a.currentFrame?"none":"block"))}function B(b){var c=b.data("carousel"),a=c.currentFrame;c.currentFrame=0==c.currentFrame?c.count-1:Math.max(c.currentFrame-1,0);c.pagination&&r(b,a,c.currentFrame);b.trigger("beforeActivate",c.currentFrame);n(b,c.width*c.currentFrame,c.duration,c.easing)}function A(b){var c=
b.data("carousel"),a=c.currentFrame;c.currentFrame=c.currentFrame==c.count-1?0:Math.min(c.currentFrame+1,c.count-1);c.pagination&&r(b,a,c.currentFrame);b.trigger("beforeActivate",c.currentFrame);n(b,c.width*c.currentFrame,c.duration,c.easing)}function D(b,c){p(b);var a=b.data("carousel"),h=a.currentFrame;a.currentFrame=Math.min(c-1,a.count-1);a.pagination&&r(b,h,a.currentFrame);b.trigger("beforeActivate",a.currentFrame);n(b,a.width*a.currentFrame,a.duration,a.easing);"forward-backward"==a.mode&&($("#"+
b.attr("id")+"_next").css("display",a.currentFrame==a.count-1?"none":"block"),$("#"+b.attr("id")+"_back").css("display",0==a.currentFrame?"none":"block"))}function p(b){b=b.data("timerId");clearInterval(b)}function r(b,c,a){var h=b.data("carousel");""!=h.pagination_img_default?(b.parent().find(".pagination img:eq("+c+")").attr("src",h.pagination_img_default),b.parent().find(".pagination img:eq("+a+")").attr("src",h.pagination_img_active)):(b.parent().find(".pagination a:eq("+c+")").removeClass("active"),
b.parent().find(".pagination a:eq("+a+")").addClass("active"))}function n(b,c,a,h){b.animate({left:-c},a,h,function(){var m=b.data("carousel");b.trigger("activate",m.currentFrame)})}function E(b){var c=0;"undefined"!=typeof window.innerWidth?c=window.innerWidth:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?c=document.documentElement.clientWidth:(c=document.getElementsByTagName("body")[0].clientWidth,
document.getElementsByTagName("body"));$(b).parent().css("width","100%");$(b).parent().css("left","0");var a=$(b).data("carousel");$(b).css("width",a.count*c+"px");a.total_width=a.count*c;a.width=c;$(b).parent().find(".frame").each(function(h){$(this).css({width:c+"px"});var m=(c-a.original_width)/2+(c-a.original_width)*h;3==a.scalemode?(a.original_width=$(this).find(".carousel-innerframe").outerWidth(),m=(c-a.original_width)/2+(c-a.original_width)*h,$(this).find(".carousel-innerframe").css({"margin-left":m+
"px"})):$(this).children().each(function(){var t=$(this).data("left");void 0!=t?t=parseInt(t):(t=parseInt($(this).css("left")),$(this).data("left",t+"px"));$(this).css("left",t+m+"px")})});$(b).css({left:-a.width*a.currentFrame})}function F(b){var c=$(b).data("carousel");if(c.original_width!=$(b).parent().outerWidth()){c.width=$(b).parent().outerWidth();c.original_width=$(b).parent().outerWidth();c.total_width=$(b).parent().outerWidth()*c.count;$(b).css("width",c.total_width+"px");var a=c.duration;
c.duration=0;A($(b));B($(b));c.duration=a}}function I(b){w=b.targetTouches[0].pageX;x=b.targetTouches[0].pageY;y=w;z=x;p(d)}function J(b){y=b.targetTouches[0].pageX;z=b.targetTouches[0].pageY;var c=y-w,a=z-x;b=Math.round(Math.sqrt(Math.pow(c,2)+Math.pow(a,2)));c=G(c,a);"left"==c?n(d,f.width*f.currentFrame+b,0,""):"right"==c&&n(d,f.width*f.currentFrame-b,0,"")}function K(b){var c=y-w,a=z-x;50<=Math.round(Math.sqrt(Math.pow(c,2)+Math.pow(a,2)))?(b=G(c,a),"left"==b?A(d):"right"==b&&B(d)):H(b)}function H(b){z=
y=x=w=0;d.trigger("beforeActivate",f.currentFrame);n(d,f.width*f.currentFrame,f.duration,f.easing)}function G(b,c){var a=Math.round(180*Math.atan2(c,-b)/Math.PI);0>a&&(a=360-Math.abs(a));return 45>=a&&0<=a||360>=a&&315<=a?"left":135<=a&&225>=a?"right":45<a&&135>a?"down":"up"}var w=0,x=0,y=0,z=0,C=!1,d=v(g);if(e&&"string"==typeof e)if("next"==e)p(d),l(d,0);else if("prev"==e)p(d),l(d,1);else if(-1!=e.indexOf("goto")){p(d);var k=e.slice(5);D(d,k)}else if("stop"==e)p(d);else{if("start"==e){p(d);var f=
d.data("carousel");l(d,f.direction);k=setInterval(function(){l(d,f.direction)},f.delay);d.data("timerId",k)}}else{k=d.find(".frame");var q=d.parent(),u=0;if("backward"==e.mode||"backward-circular"==e.mode)u=1;f={count:k.length,currentFrame:0,delay:e.delay,direction:u,duration:e.duration,easing:e.easing,scalemode:e.scalemode,killtimer:e.killtimer,mode:e.mode,pagination:e.pagination,pagination_img_default:e.pagination_img_default,pagination_img_active:e.pagination_img_active,width:q.outerWidth(),original_width:q.outerWidth(),
total_width:q.outerWidth()*k.length};d.css("width",f.total_width+"px");d.data("carousel",f);if(e.pagination){$pagination=$('<div class="pagination" />');for(q=0;q<k.length;q++)u=$("<a />").attr("id",String(q+1)),""!=e.pagination_img_default&&$("<img />").attr({id:"page_"+String(q+1),src:e.pagination_img_default}).appendTo(u),u.click(function(){D(d,$(this).attr("id"))}),u.appendTo($pagination);$pagination.appendTo(d.parent());r(d,0,0)}0!=e.start?(f.currentFrame=e.start,f.pagination&&r(d,0,f.currentFrame),
d.trigger("beforeActivate",f.currentFrame),n(d,f.width*f.currentFrame,0,"")):(d.trigger("beforeActivate",0),setTimeout(function(){d.trigger("activate",0)},10));"forward-backward"==e.mode&&(0==e.start&&$("#"+d.attr("id")+"_back").css("display","none"),e.start>=k.length-1&&$("#"+d.attr("id")+"_next").css("display","none"));"hover"!=e.pause||"ontouchstart"in document.documentElement||(d.on("mouseenter",function(){C=!0;p(d)}),d.on("mouseleave",function(){if(C){C=!1;p(d);var b=d.data("carousel");l(d,b.direction);
var c=setInterval(function(){l(d,b.direction)},b.delay);d.data("timerId",c)}}));0!=e.delay&&(k=setInterval(function(){l(d,d.data("carousel").direction)},e.delay),d.data("timerId",k));"Microsoft Internet Explorer"!=navigator.appName&&(g.addEventListener("touchstart",I,!1),g.addEventListener("touchmove",J,!1),g.addEventListener("touchend",K,!1),g.addEventListener("touchcancel",H,!1));1==e.scalemode||3==e.scalemode?(E(g),$(window).resize(function(){E(g)})):2==e.scalemode&&(F(g),$(window).resize(function(){F(g)}))}}})(jQuery);